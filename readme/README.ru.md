# SkillNotes

Веб-приложение для создания заметок.

## README.md

* en [English](../README.md)
* ru [Русский](README.ru.md)

## Содержание

* [Описание проекта](#описание-проекта)
* [Технологии использованные в серверной части](#технологии-использованные-в-серверной-части)
* [Установка проекта](#установка-проекта)
* [Запуск сервера для разработки](#запуск-сервера-для-разработки)
* [Компиляция и сборка проекта](#компиляция-и-сборка-проекта)
* [Развертывание проекта на Vercel](#развертывание-проекта-на-vercel)
* [Наполнение базы данных тестовыми данными](#наполнение-базы-данных-тестовыми-данными)
* [Конфигурация](#конфигурация)
* [Информация по API](#информация-по-api)

## Описание проекта

Сервис личных заметок в формате Markdown.
Сервис позволяет создавать, редактировать, архивировать и удалять заметки.

## Технологии использованные в серверной части

* Node.js
* TypeScript
* Express.js
* PostgreSQL

## Установка проекта

Действия при установке проекта:

1. Установить пакеты npm с помощью команды `npm install`
2. Создать файл с конфигурацией `.env` по примеру файла `.env-sample`
3. Выполнить миграцию базы данных `npx knex migrate:latest`
4. Выполнить наполнение базы данных тестовыми данными если это необходимо
  `npm run seed`

## Запуск сервера для разработки

Запустить сервер для разработки можно с помощью команды `npm run dev`.  
Сервер работает по URL: `http://localhost:3000`

## Компиляция и сборка проекта

Компиляция и сборка проекта совершается с помощью команды `npm run build`.

## Развертывание проекта на Vercel

Перед развертыванием проекта необходимо выполнить компиляцию и сборку
командой `npm run build`, затем развернуть проект командой `vercel`.
В проекте Vercel нужно установить переменные окружения по примеру .env-sample.

## Наполнение базы данных тестовыми данными

Наполнение выполняется с помощью команды `npm run seed`.

При наполнением тестовыми данными создается пользователь 'user' с паролем
'password'.

## Конфигурация

Конфигурация находится в файле `.env`. Пример конфигурации  
можно найти в файле `.env-sample`.

## Информация по API

### Примечания по данным

Тип Note:

```json
{
  "id": 1,
  "title": "Note title",
  "markdown": "# Some markdown",
  "created": "2024-03-25T05:16:28.717Z",
  "archived": false,
  "user_id": 1,
  "modified": "2024-03-25T05:16:28.717Z"
}
```

### Эндпойнты

#### GET `/api/notes` - Получить список заметок

Принимает query-параметры:

`age` - строка для фильтрации списка заметок по дате или нахождения в архиве.

Возможные значения:

* `1month`
* `3months`
* `alltime`
* `archived`

`page` - номер страницы пагинации

Возвращает массив с типом Note

---

#### GET `/api/notes/{id}` - Получить данные о конкретной заметке

Возвращает тип Note

---

#### POST `/api/notes` - Создать новую заметку

Принимает:

```json
{
  "title": "New note",
  "markdown": "# Some markdown text"
}
```

Возвращает тип Note

---

#### PUT `/api/notes{id}` - Изменить заметку

Принимает:

```json
{
  "title": "New note",
  "markdown": "# Some markdown text"
}
```

Возвращает тип Note

---

#### POST `/api/notes/{id}/archive` - Перенести заметку в архив

Возвращает тип Note

---

#### POST `/api/notes/{id}/unarchive` - Восстановить заметку из архива

Возвращает тип Note

---

#### DELETE `/api/notes/{id}` - Удалить заметку

---

#### DELETE `/api/notes/archived` - Удалить все заметки в архиве

---
